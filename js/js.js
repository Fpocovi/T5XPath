function corregir(){return comprobar(),0==test&&(corregirRadio("UAP_HE1","resp1",sol_radio1),corregirCheckbox("UAP_HE2","resp2",sol_chk1),corregirText("UAP_HE3","resp3",sol_text1),corregirMulti("UAP_HE4","resp4",sol_multiple1),corregirRadio("UAP_HE5","resp5",sol_radio2),corregirSelect("UAP_HE6","resp6",sol_select1),corregirMulti("UAP_HE7","resp7",sol_multiple2),corregirCheckbox("UAP_HE8","resp8",sol_chk2),corregirSelect("UAP_HE9","resp9",sol_select2),corregirText("UAP_HE10","resp10",sol_text2),mensaje="",Nota()),!1}function comprobar(){var e=document.getElementById("resp1").elements.radio,t=document.getElementById("resp2").elements.checkbox,n=document.getElementById("resp3").getElementsByTagName("input")[0].value,l=document.getElementById("resp4").getElementsByTagName("option"),o=document.getElementById("resp5").elements.radio,c=document.getElementById("resp6"),r=document.getElementById("resp7").getElementsByTagName("option"),a=document.getElementById("resp8").elements.checkbox,s=document.getElementById("resp9"),m=document.getElementById("resp10").getElementsByTagName("input")[0].value;for(checked1=!1,checked2=!1,checked3=!1,checked4=!1,checked5=!1,checked6=!1,i=0;i<e.length;i++)e[i].checked&&(checked5=!0);for(i=0;i<t.length;i++)t[i].checked&&(checked3=!0);for(i=0;i<l.length;i++)l[i].selected&&(checked1=!0);for(i=0;i<o.length;i++)e[i].checked&&(checked6=!0);for(i=0;i<r.length;i++)r[i].selected&&(checked2=!0);for(i=0;i<a.length;i++)a[i].checked&&(checked4=!0);return checked5||(mensaje+="falta la pregunta Radio Nº1\n",test=1+test),checked3||(mensaje+="falta la pregunta checkbox Nº2\n",test=1+test),""==n&&(mensaje+="falta la pregunta texto Nº3\n",test=1+test),checked1||(mensaje+="falta la pregunta multiple Nº4\n",test=1+test),checked6||(mensaje+="falta la pregunta pregunta Radio Nº5\n",test=1+test),0==c.selectedIndex&&(mensaje+="falta la pregunta select Nº6\n",test=1+test),checked2||(mensaje+="falta la pregunta multiple Nº7\n",test=1+test),checked4||(mensaje+="falta la pregunta checkbox Nº8\n",test=1+test),0==s.selectedIndex&&(mensaje+="falta la pregunta select Nº9\n",test=1+test),""==m&&(mensaje+="falta la pregunta texto Nº10\n",test=1+test),""==mensaje?(test=0,!1):(alert("Falta/n la/s siguiente/s pregunta/s\n"+mensaje),void(mensaje=""))}function gestionarXml(e){xmlDoc=e.responseXML,question=xmlDoc.querySelector("#UAP_HE1"),SelecResp=document.querySelector("#resp1"),tituloSelect=xmlDoc.getElementsByTagName("title")[0].innerHTML;var t=SelecResp.getAttribute("id"),n=question.getAttribute("id"),l="/questions/question[@id='UAP_HE1']/option",o=xmlDoc.getElementsByTagName("type")[0].innerHTML,c=xmlDoc.evaluate(l,xmlDoc,null,XPathResult.ANY_TYPE,null);ponerDatosChb_Rad(n,t,tituloSelect,c,o),sol_radio1=xmlDoc.getElementById("UAP_HE1").getElementsByTagName("answer")[0].innerHTML,question=xmlDoc.querySelector("#UAP_HE2"),SelecResp=document.querySelector("#resp2"),tituloSelect=xmlDoc.getElementsByTagName("title")[1].innerHTML;var t=SelecResp.getAttribute("id"),n=question.getAttribute("id"),l="/questions/question[@id='UAP_HE2']/option",o=xmlDoc.getElementsByTagName("type")[1].innerHTML,c=xmlDoc.evaluate(l,xmlDoc,null,XPathResult.ANY_TYPE,null);for(ponerDatosChb_Rad(n,t,tituloSelect,c,o),a=xmlDoc.getElementById("UAP_HE2").getElementsByTagName("answer").length,i=0;i<a;i++)sol_chk1[i]=xmlDoc.getElementById("UAP_HE2").getElementsByTagName("answer")[i].innerHTML;document.getElementById("UAP_HE3").innerHTML=xmlDoc.getElementsByTagName("title")[2].innerHTML,select=document.getElementById("resp3");var r=document.createElement("input");r.type=xmlDoc.getElementsByTagName("type")[2].innerHTML,r.name="text1",r.autocomplete="off",select.appendChild(r),sol_text1=xmlDoc.getElementById("UAP_HE3").getElementsByTagName("answer")[0].innerHTML.toUpperCase(),question=xmlDoc.querySelector("#UAP_HE4"),SelecResp=document.querySelector("#resp4"),SelecResp.setAttribute("multiple","true"),tituloSelect=xmlDoc.getElementsByTagName("title")[3].innerHTML;var t=SelecResp.getAttribute("id"),n=question.getAttribute("id"),l="/questions/question[@id='UAP_HE4']/option",c=xmlDoc.evaluate(l,xmlDoc,null,XPathResult.ANY_TYPE,null);ponerDatosSelect(n,t,tituloSelect,c);var a=xmlDoc.getElementById("UAP_HE4").getElementsByTagName("answer").length;for(i=0;i<a;i++)sol_multiple1[i]=xmlDoc.getElementById("UAP_HE4").getElementsByTagName("answer")[i].innerHTML;question=xmlDoc.querySelector("#UAP_HE6"),SelecResp=document.querySelector("#resp6"),tituloSelect=xmlDoc.getElementsByTagName("title")[5].innerHTML;var t=SelecResp.getAttribute("id"),n=question.getAttribute("id"),l="/questions/question[@id='UAP_HE6']/option",c=xmlDoc.evaluate(l,xmlDoc,null,XPathResult.ANY_TYPE,null);ponerDatosSelect(n,t,tituloSelect,c),sol_select1=xmlDoc.getElementById("UAP_HE6").getElementsByTagName("answer")[0].innerHTML,question=xmlDoc.querySelector("#UAP_HE7"),SelecResp=document.querySelector("#resp7"),SelecResp.setAttribute("multiple","true"),tituloSelect=xmlDoc.getElementsByTagName("title")[6].innerHTML,nopciones=xmlDoc.getElementById("UAP_HE7").getElementsByTagName("option").length;var t=SelecResp.getAttribute("id"),n=question.getAttribute("id"),l="/questions/question[@id='UAP_HE7']/option",c=xmlDoc.evaluate(l,xmlDoc,null,XPathResult.ANY_TYPE,null);for(ponerDatosSelect(n,t,tituloSelect,c),i=0;i<a;i++)sol_multiple2[i]=xmlDoc.getElementById("UAP_HE7").getElementsByTagName("answer")[i].innerHTML;question=xmlDoc.querySelector("#UAP_HE8"),SelecResp=document.querySelector("#resp8"),tituloSelect=xmlDoc.getElementsByTagName("title")[7].innerHTML;var t=SelecResp.getAttribute("id"),n=question.getAttribute("id"),l="/questions/question[@id='UAP_HE8']/option",o=xmlDoc.getElementsByTagName("type")[7].innerHTML,c=xmlDoc.evaluate(l,xmlDoc,null,XPathResult.ANY_TYPE,null);for(ponerDatosChb_Rad(n,t,tituloSelect,c,o),a=xmlDoc.getElementById("UAP_HE8").getElementsByTagName("answer").length,i=0;i<a;i++)sol_chk2[i]=xmlDoc.getElementById("UAP_HE8").getElementsByTagName("answer")[i].innerHTML;question=xmlDoc.querySelector("#UAP_HE9"),SelecResp=document.querySelector("#resp9"),tituloSelect=xmlDoc.getElementsByTagName("title")[8].innerHTML;var t=SelecResp.getAttribute("id"),n=question.getAttribute("id"),l="/questions/question[@id='UAP_HE9']/option",c=xmlDoc.evaluate(l,xmlDoc,null,XPathResult.ANY_TYPE,null);ponerDatosSelect(n,t,tituloSelect,c),sol_select2=xmlDoc.getElementById("UAP_HE9").getElementsByTagName("answer")[0].innerHTML,document.getElementById("UAP_HE10").innerHTML=xmlDoc.getElementsByTagName("title")[9].innerHTML,select=document.getElementById("resp10"),r=document.createElement("input"),r.type=xmlDoc.getElementsByTagName("type")[9].innerHTML,r.name="text2",r.autocomplete="off",select.appendChild(r),sol_text2=xmlDoc.getElementById("UAP_HE10").getElementsByTagName("answer")[0].innerHTML.toUpperCase(),question=xmlDoc.querySelector("#UAP_HE5"),SelecResp=document.querySelector("#resp5"),tituloSelect=xmlDoc.getElementsByTagName("title")[4].innerHTML;var t=SelecResp.getAttribute("id"),n=question.getAttribute("id"),l="/questions/question[@id='UAP_HE5']/option",o=xmlDoc.getElementsByTagName("type")[4].innerHTML,c=xmlDoc.evaluate(l,xmlDoc,null,XPathResult.ANY_TYPE,null);ponerDatosChb_Rad(n,t,tituloSelect,c,o),sol_radio2=xmlDoc.getElementById("UAP_HE5").getElementsByTagName("answer")[0].innerHTML}function corregirText(e,t,n){var l=document.getElementById(t).getElementsByTagName("input")[0].value;l.toUpperCase()==n.toUpperCase()&&(nota+=1);var o=xmlDoc.createElement("useranswer");o.innerHTML=l.toUpperCase(),xmlDoc.getElementById(e).appendChild(o)}function corregirSelect(e,t,n){var l=document.getElementById(t);l.selectedIndex-1==n&&(nota+=1);var o=xmlDoc.createElement("useranswer");o.innerHTML=l.selectedIndex,xmlDoc.getElementById(e).appendChild(o)}function corregirMulti(e,t,n){var l=[],o=document.getElementById(t).getElementsByTagName("option");for(i=0;i<o.length;i++)if(o[i].selected){for(l[i]=!1,j=0;j<n.length;j++)i==n[j]&&(l[i]=!0);var c=xmlDoc.createElement("useranswer");c.innerHTML=i+1,xmlDoc.getElementById(e).appendChild(c)}for(i=0;i<o.length;i++)o[i].selected&&(l[i]?nota+=1/n.length:nota-=1/n.length)}function corregirCheckbox(e,t,n){var l=[],o=document.getElementById(t).elements.checkbox;for(i=0;i<o.length;i++)if(o[i].checked){var c=xmlDoc.createElement("useranswer");for(c.innerHTML=i+1,xmlDoc.getElementById(e).appendChild(c),l[i]=!1,j=0;j<n.length;j++)i==n[j]&&(l[i]=!0)}for(i=0;i<o.length;i++)o[i].checked&&(l[i]?nota+=1/n.length:nota-=1/n.length)}function corregirRadio(e,t,n){var l=null,o=document.getElementById(t).elements.radio;for(i=0;i<o.length;i++)if(o[i].checked){l=i;var c=xmlDoc.createElement("useranswer");c.innerHTML=i+1,xmlDoc.getElementById(e).appendChild(c)}l==n&&(nota+=1)}function ponerDatosSelect(e,t,n,l){document.getElementById(e).innerHTML=n;var o=document.getElementById(t),c=l.iterateNext();for(i=0;c;){var r=document.createElement("option");r.text=c.innerHTML,r.value=i,i++,o.add(r),c=l.iterateNext()}}function ponerDatosChb_Rad(e,t,n,l,o){document.getElementById(e).innerHTML=n;var c=document.getElementById(t),r=l.iterateNext();for(i=0;r;){var a=document.createElement("input"),s=document.createElement("label");s.innerHTML=r.innerHTML,a.type=o,a.name=o,a.value=i,i++,c.appendChild(a),c.appendChild(s),c.appendChild(document.createElement("br")),r=l.iterateNext()}}function darRespuestaHtml(e){var t=document.createElement("p");t.innerHTML=e,document.body.appendChild(t)}function ponerDatosSelect(e,t,n,l){document.getElementById(e).innerHTML=n;var o=document.getElementById(t),c=l.iterateNext();for(i=0;c;){var r=document.createElement("option");r.text=c.innerHTML,r.value=i,i++,o.add(r),c=l.iterateNext()}}function Nota(){document.body.innerHTML="",document.body.style.display="block",document.implementation&&document.implementation.createDocument&&(xsltProcessor=new XSLTProcessor,xsltProcessor.importStylesheet(xslDoc),resultDocument=xsltProcessor.transformToFragment(xmlDoc,document),document.body.appendChild(resultDocument)),darRespuestaHtml("<h2><i>Nota: "+nota+" puntos sobre 10</i></h2>")}var formElement=null,sol_text1=null,sol_text2=null,sol_select1=null,sol_select2=null,sol_chk1=[],sol_chk2=[],sol_multiple1=[],sol_multiple2=[],sol_radio1=null,sol_radio2=null,click=!1,mensaje="",test=0,checked1=!1,checked2=!1,checked3=!1,checked4=!1,checked5=!1,checked6=!1,xmlDoc=null,xslDoc=null,nota=0;window.onload=function(){formElement=document.getElementById("comprobar"),formElement.onclick=function(){corregir()};var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&200==this.status&&gestionarXml(this)},e.open("GET","xml/questions.xml",!0),e.send();var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&(xslDoc=this.responseXML)},t.open("GET","xml/questions.xsl",!0),t.send()};